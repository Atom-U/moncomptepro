<div class="dashboard-container">
    <div class="dashboard-head">
        <h1>MonComptePro</h1>
    </div>
    <%- include('partials/sidemenu.ejs', {activeLink: 'passkeys'}) %>
    <div class="dashboard-content fr-col-12 fr-col-lg-9 fr-col-xl-8 fr-col-offset-lg-1">
        <%- include('partials/notifications.ejs', {notifications: notifications}) %>
        <h2>Vos clés d’accès</h2>
        <div class="fr-callout fr-icon-information-line" id="webauthn-register" hidden>
            <h3 class="fr-callout__title">Créer une clé d'accès sur cet appareil</h3>
            <p class="fr-callout__text">
                Connectez-vous plus vite la prochaine fois en créant une clé d'accès sur cet appareil
            </p>
            <button class="fr-btn" id="webauthn-btn-begin">
                Créer une clé d’accès
            </button>
        </div>
        <div class="fr-callout fr-icon-information-line" id="webauthn-success" hidden>
            <h3 class="fr-callout__title">Tout est en ordre !</h3>
            <p class="fr-callout__text">
                Vous pouvez désormais utiliser votre empreinte, votre visage ou le verrouillage de l'écran pour vous
                connecter sur cet appareil
            </p>
            <button class="fr-btn" id="xxx">
                Essayer
            </button>
        </div>
        <div class="fr-callout fr-icon-alert-line" id="webauthn-error" hidden>
            <h3 class="fr-callout__title">
                Impossible de créer une clé d’accès sur cet appareil
            </h3>
            <p class="fr-callout__text">
                Assurez-vous que le système d’exploitation de votre appareil est à jour, que le verrouillage de l’écran
                et le Bluetooth sont activés, et que vous utilisez un navigateur compatible.
            </p>
        </div>
        <p>
            Les clés d’accès vous permettent de vous connecter de façon sécurisée à votre compte MonComptePro
            en utilisant votre empreinte digitale, votre visage, le verrouillage de l’écran ou une clé de
            sécurité physique. Ne configurez des clés d’accès que sur les appareils dont vous êtes
            propriétaire.
            <a
                    class="fr-link" target="_blank" rel="noopener noreferrer"
                    href="https://fr.wikipedia.org/wiki/Cl%C3%A9_d%27acc%C3%A8s"
            >En savoir plus</a>
        </p>
        <h2>Clés d'accès que vous avez créées</h2>
        <div class="fr-grid-row fr-grid-row--gutters">
            <div class="fr-col-12 fr-col-lg-10">
                <div class="fr-tile fr-enlarge-link fr-tile--horizontal">
                    <div class="fr-tile__body">
                        <h4 class="fr-tile__title">
                            1 Password
                        </h4>
                        <p class="fr-tile__desc">Création : à l'instant</p>
                        <p class="fr-tile__desc">
                            Dernière utilisation : pas encore utilisée
                        </p>
                        <br />
                        <div class="card-button-container">
                            <form action="/users/quit-organization/< %= id % >" method="post">
                                <input type="hidden" name="_csrf" value="< %= csrfToken; % >" autocomplete="off">
                                <button class="fr-btn fr-btn--secondary fr-btn--sm" type="submit">
                                    Supprimer cette clé d’accès
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="fr-col-12 fr-col-lg-8 fr-col-xl-7">
                <div class="fr-alert fr-alert--info">
                    Vous n’êtes attaché à aucune organisation.
                </div>
            </div>
            <div class="fr-col-12">
                <button class="fr-btn fr-btn--secondary fr-btn--icon-left fr-icon-add-line" id="btnBegin">
                    Créer une clé d’accès
                </button>
            </div>
        </div>
    </div>
</div>
<script src="/assets/simplewebauthn.umd.min.js"></script>
<script src="/assets/webauthn-registration.js"></script>
